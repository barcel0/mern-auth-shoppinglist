(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,a){e.exports=a(63)},62:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),u=a(10),i=a(5),o=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:"GET_ERRORS",payload:{msg:e,status:t,id:a}}},s=function(){return{type:"CLEAR_ERRORS"}},m=a(13),d=a.n(m),E=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a},p=Object(i.b)((function(e){return{error:e.error,auth:e.auth}}),{clearErrors:s,logout:function(){return{type:"LOGOUT_SUCCESS"}}})((function(e){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(u.b,{to:"/",onClick:function(){return e.clearErrors()}},"BORING SHOPPING LIST")),e.auth.isAuthenticated?r.a.createElement("ul",null,r.a.createElement("li",null,"Welcome back ",e.auth.user.name,"!"),r.a.createElement("li",null,r.a.createElement(u.b,{to:"#",onClick:e.logout},"Logout"))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(u.b,{to:"/login",onClick:function(){return e.clearErrors()}},"Login")),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/register",onClick:function(){return e.clearErrors()}},"Register")))),r.a.createElement("nav",null,"The main purpose of this MERN app is to create a basic JWT based authentication system and learn some Redux."))})),f=function(){return{type:"ITEMS_LOADING"}},h=a(7),O=Object(i.b)((function(e){return{item:e.item,auth:e.auth}}),{addItem:function(e){return function(t,a){return t(f()),d.a.post("/api/items",e,E(a)).then((function(e){t({type:"ADD_ITEM",payload:e.data})})).catch((function(e){t(o(e.response.data,e.response.status))})),{type:"ADD_ITEM",payload:e}}}})((function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1];return e.auth.isAuthenticated?r.a.createElement("div",{className:"button-row"},r.a.createElement("input",{type:"text",placeholder:"Type new item here...",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("div",{className:"btn",onClick:function(){return function(){if(c.length>=3){l("");var t={name:c};e.addItem(t)}}()}},"Add Item")):r.a.createElement("div",{className:"button-row"},r.a.createElement("span",null,"Log in to add new items."))})),b=Object(i.b)((function(e){return{item:e.item,isAuthenticated:e.auth.isAuthenticated}}),{getItems:function(){return function(e){e(f()),d.a.get("/api/items").then((function(t){e({type:"GET_ITEMS",payload:t.data})})).catch((function(t){e(o(t.response.data,t.response.status))}))}},deleteItem:function(e){return function(t,a){return t(f()),d.a.delete("/api/items/"+e,E(a)).then((function(a){t({type:"DELETE_ITEM",payload:e})})).catch((function(e){t(o(e.response.data,e.response.status))})),{type:"DELETE_ITEM",payload:e}}}})((function(e){var t=e.getItems;Object(n.useEffect)((function(){t()}),[t]);return r.a.createElement("section",null,r.a.createElement("div",{className:"box"},r.a.createElement(O,null),r.a.createElement("div",{className:"list-container"},r.a.createElement("ul",null,function(){var t=e.item.items;if(t)return t.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("h2",null,t.name),e.isAuthenticated?r.a.createElement("div",{className:"btn-delete",onClick:function(){return e.deleteItem(t._id)}},"Delete"):null)}))}()))))})),g=a(12),S=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:function(e,t){var a=e.name,n=e.email,r=e.password;return function(e){var c=JSON.stringify({name:a,email:n,password:r});d.a.post("/api/users",c,{headers:{"Content-Type":"application/json"}}).then((function(a){e({type:"REGISTER_SUCCESS",payload:a.data}),t.push("/")})).catch((function(t){e(o(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:"REGISTER_FAIL"})}))}},clearErrors:s})((function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),i=Object(h.a)(u,2),o=i[0],s=i[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),E=d[0],p=d[1],f=Object(n.useState)(""),O=Object(h.a)(f,2),b=O[0],S=O[1],y=Object(g.f)();Object(n.useEffect)((function(){var t=e.error;t&&("REGISTER_FAIL"===t.id?S(t.msg.msg):S(null))}),[e.error]);var v=function(e,t){switch(e){case"name":l(t.target.value);break;case"email":s(t.target.value);break;case"password":p(t.target.value);break;default:return!0}};return r.a.createElement("section",null,r.a.createElement("div",{className:"container-column"},r.a.createElement("h2",null,"Create New User"),b?r.a.createElement("span",{className:"alert"},b):null,r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var a={name:c,email:o,password:E};e.register(a,y)}(t)}},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",id:"name",onChange:function(e){return v("name",e)}}),r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",id:"email",onChange:function(e){return v("email",e)}}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",id:"password",onChange:function(e){return v("password",e)}}),r.a.createElement("input",{type:"submit",value:"Submit"}))))})),y=Object(i.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{login:function(e,t){var a=e.email,n=e.password;return function(e){var r=JSON.stringify({email:a,password:n});d.a.post("/api/auth",r,{headers:{"Content-Type":"application/json"}}).then((function(a){e({type:"LOGIN_SUCCESS",payload:a.data}),t.push("/")})).catch((function(t){e(o(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})}))}},clearErrors:s})((function(e){var t=Object(n.useState)(""),a=Object(h.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)(""),i=Object(h.a)(u,2),o=i[0],s=i[1],m=Object(n.useState)(""),d=Object(h.a)(m,2),E=d[0],p=d[1],f=Object(g.f)();Object(n.useEffect)((function(){var t=e.error;t&&("LOGIN_FAIL"===t.id?p(t.msg.msg):p(null))}),[e.error]);var O=function(e,t){switch(e){case"email":l(t.target.value);break;case"password":s(t.target.value);break;default:return!0}};return r.a.createElement("section",null,r.a.createElement("div",{className:"container-column"},r.a.createElement("h2",null,"User Login"),E?r.a.createElement("span",{className:"alert"},E):null,r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),e.login({email:c,password:o},f)}(t)}},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",id:"email",onChange:function(e){return O("email",e)}}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",id:"password",onChange:function(e){return O("password",e)}}),r.a.createElement("input",{type:"submit",value:"Submit"}))))})),v=(a(62),a(11)),I=a(34),_=a(9),R={items:[],loading:!1},j={msg:{},status:null,id:null},L={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},T=Object(v.c)({item:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ITEMS":return Object(_.a)({},e,{items:t.payload,loading:!1});case"ADD_ITEM":return Object(_.a)({},e,{items:e.items.concat(t.payload)});case"DELETE_ITEM":return Object(_.a)({},e,{items:e.items.filter((function(e){return e._id!==t.payload}))});case"ITEMS_LOADING":return Object(_.a)({},e,{loading:!0});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(_.a)({},e,{isLoading:!0});case"USER_LOADED":return Object(_.a)({},e,{isAuthenticated:!0,isLoading:!1,user:t.payload});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(_.a)({},e,{},t.payload,{isAuthenticated:!0,isLoading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":case"REGISTER_FAIL":return localStorage.removeItem("token"),Object(_.a)({},e,{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case"CLEAR_ERRORS":return j;default:return e}}}),A=[I.a],w=Object(v.e)(T,{},Object(v.d)(v.a.apply(void 0,A),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));var N=function(){return Object(n.useEffect)((function(){w.dispatch((function(e,t){e({type:"USER_LOADING"}),d.a.get("/api/auth/user",E(t)).then((function(t){return e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(o(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}))}),[]),r.a.createElement(i.a,{store:w},r.a.createElement(u.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/",exact:!0},r.a.createElement(b,null)),r.a.createElement(g.a,{path:"/register",exact:!0},r.a.createElement(S,null)),r.a.createElement(g.a,{path:"/login",exact:!0},r.a.createElement(y,null))))))};l.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.1bad1293.chunk.js.map